{"version":3,"sources":["tree/msNgTree.js"],"names":[],"mappings":"0CAQY,gBAAA,mBACA,IAAA,oBACA,GACJ,IAQA,OAPA,GAAA,OAAA,SAAA,GACJ,GACY,EAAO,YAAA,YAEnB,EAAA,EACA,EAAkB,SAAA,aAEd,cAEI,UAAA,wBAGA,SAAA,2BAGI,4EACA,cACA,WACA,YAEA,KAAA,WACA,WAAA,IACA,SAAA,IACA,SAAA,IACJ,cAAA,IACJ,eAAA,IACJ,UAAA,IACS,YAAe,IACpB,UAAA,IACI,OAAA,YACA,SAAA,+CAII,WAAA,gBAAA,SAAA,EAAA,mBAEA,aACA,cACA,0BAEA,SAAA,EAAA,EAAA,GACA,GAAA,KAEA,GAAA,WAAA,EAAA,YAAA,SACA,EAAA,SAAA,EAAA,UAAA,OACA,EAAA,SAAA,EAAA,SACA,EAAA,eAAA,EAAA,QAAA,iBACI,UAAA,EAAA,QAAA,YACA,cAAA,EAAA,QAAA,4BACI,EAAA,QAAA,wBACA,EAAA,QAAA,sBACA,OAcJ,GAAA,QAAA,SAAA,GACA,GAAA,GAAA,EAAA,KAAA,KACA,IACJ,EAAA,YAAA,+BAII,GAAA,OAAA,GACA,EAAA,kCAII,SAAA,GAWJ,QAAA,GAAA,GACA,QAAA,QAAA,EAAA,MAAA,SAAA,GACJ,EAAA,MAAA,EAAA,YAXI,EAAA,UAAA,EAAA,8BAEA,QAAA,IAAA,eAAA,EAAA,EAAA,EAAA,EAAA,WACI,QAAA,UAAA,EAAA,EAAA,YACI,EAAA,EAAA,UAAA,IAaR,EAAA,MAGA,SAAA,SAAA,GACJ,MAAA,GAAA,MAAA,EAAA,cAEI,OAAA,SAAA,GACJ,MAAA,GAAA,MAAA,EAAA,YAEI,WAAA,WACJ,MAAA,GAAA,YAEI,YAAA,SAAA,GACJ,MAAA,GAAA,OAAA,EAAA,MAAA,OAAA,KAEI,gBAAA,WACJ,MAAA,SAAA,UAAA,EAAA,8CAGI,MAAA,SAAA,UAAA,EAAA,iBAEJ,EAAA,YAAA,WACI,MAAA,SAAA,UAAA,EAAA,YAEJ,EAAA,iBAAA,WAEA,MAAA,GAAA,8CAGA,MAAA,GAAA,+BAEQ,WACJ,MAAA,GAAA,WAIJ,EAAA,OAAA,SAAA,GACI,MAAA,GAAA,OAAA,GAAA,EAAA,MAAA,QACA,GAEA,KAGI,MAAA,EAAA,KAAA,OAAA,EAAA,KAAA,MAAA,OAAA,EAAA,CACJ,GAAA,GAAA,EACA,SAAA,UAAA,EAAA,YACI,GAAA,oBAAA,EAAA,SAAA,uCAIA,GAAA,sBAAA,EAAA,WAAA,KAEJ,QAAA,UAAA,EAAA,mDAGA,QAAA,UAAA,EAAA,kEAIA,QAAA,UAAA,EAAA,qEAIA,QAAA,UAAA,EAAA,sDAIA,QAAA,UAAA,EAAA,eAEA,GAAA,uBAAA,EAAA,YAAA,KAEA,QAAA,UAAA,EAAA,aAER,GAAA,qBAAA,EAAA,UAAA","file":"msNgTree.min.js","sourcesContent":["angular.module('ms.NgUi.tree',[])\n    .service('msTreeService',function() {\n        console.log('msTreeService');\n        var selectedElement;\n        var msTreeService={};\n        msTreeService.select = function(element) {\n            if (selectedElement) {\n                selectedElement.removeClass('selected');\n            }\n            selectedElement=element;\n            selectedElement.addClass('selected');\n        }\n        return msTreeService;\n    })\n    .directive('msTree1', function() {\n\n    })\n    .directive('msTree', function() {\n\n        return {\n            template: '<tree-node-element ng-repeat=\"node in tree\"></tree-node-element>',\n            replace: true,\n            transclude: true,\n            restrict: 'EA',\n            scope: {\n                tree: '=ngModel',\n                folderType:\"=\",\n                fileType:\"=\",\n                hovering: \"=\",//branch, leaf\n                classExpanded:  \"@\",\n                classCollapsed:  \"@\",\n                classFile: \"@\",\n                classParent: \"@\",\n                classLeaf: \"@\",\n                select : \"&onSelect\",\n                children : \"=\"\n            }\n        };\n    }).factory(\n).directive('treeNodeElement', function($compile, msTreeService) {\n        return {\n            restrict: 'E',\n            replace: true,\n            templateUrl: 'tree/tree.tpl.html',\n\n            link: function(scope, elm, attrs, controller) {\n                var options = {};\n\n                options.folderType = attrs.folderType || \"folder\" ;\n                options.fileType = attrs.fileType || \"file\" ;\n                options.onSelect=attrs.onSelect;\n                scope.classCollapsed=scope.$parent.classCollapsed;\n                scope.classFile=scope.$parent.classFile;\n                scope.classExpanded=scope.$parent.classExpanded;\n                scope.classParent=scope.$parent.classParent;\n                scope.classLeaf=scope.$parent.classLeaf;\n                scope.expanded = true;\n                var parentEl=\"\";\n                function deselectTree(elm) {\n                    var parent = elm.parent();\n                    if (parent[0].tagName==\"UL\" || parent[0].tagName==\"LI\") {\n                        parent.children('span').removeClass('selected');\n                        console.log(parent.children('span'));\n                        parentEl=parent;\n                        deselectTree(parent);\n                    }\n                    else {\n                    }\n\n                }\n                elm.on('click', function(e) {\n                    var children = elm.find('li');\n                    if (children) {\n                        children.toggleClass('ng-hide');\n                    }\n                    //var el=deselectTree(elm);\n                    var elemLeaf=elm.find('span');\n                    msTreeService.select(elemLeaf);\n                    e.stopPropagation();\n                    //elemLeaf.toggleClass('selected');\n                })\n\n                scope.nodeClicked = function(node) {\n\n                    scope.expanded=!scope.expanded;\n                    if (node.type==options.fileType) {\n                        console.log('Node clicked', node, options,scope[options.onSelect]);\n                        if (angular.isDefined(scope[options.onSelect])) {\n                            scope[options.onSelect](node);\n                        }\n\n                    }\n\n                    function toggleChildren(child) {\n                        angular.forEach(child.nodes, function(child) {\n                            child.hide=!child.hide;\n                            toggleChildren(child);\n                        });\n\n\n                    }\n                    toggleChildren(node);\n                };\n\n                scope.isFolder = function(node) {\n                    return node.type == options.folderType;\n                }\n                scope.isFile = function(node) {\n                    return node.type == options.fileType;\n                }\n                scope.isExpanded = function(node) {\n                    return scope.expanded;\n                }\n                scope.hasChildren = function(node) {\n                    return (node.nodes && node.nodes.length > 0);\n                }\n                scope.isClassExpanded = function() {\n                    return angular.isDefined(attrs.classExpanded);\n                }\n                scope.isClassCollapsed = function() {\n                    return angular.isDefined(options.classCollapsed);\n                }\n                scope.isClassFile = function() {\n                    return angular.isDefined(options.classFile);\n                }\n                scope.getClassExpanded = function() {\n\n                    return attrs.classExpanded;\n                }\n                scope.getClassCollapsed = function() {\n                    return attrs.classCollapsed;\n                }\n                scope.getClassFile = function() {\n                    return attrs.classFile;\n                }\n\n\n                scope.isLeaf = function(_data) {\n                    if (_data.nodes && _data.nodes.length == 0) {\n                        return true;\n                    }\n                    return false;\n                };\n\n                if (scope.node && scope.node.nodes &&  scope.node.nodes.length > 0) {\n                    var childNodeAttr=\"\";\n                    if (angular.isDefined(options.onSelect)) {\n                        childNodeAttr+=' data-on-select=\"' + options.onSelect + '\"';\n                    }\n\n                    if (angular.isDefined(attrs.folderType)) {\n                        childNodeAttr+=' data-folder-type=\"' + attrs.folderType + '\"';\n                    }\n                    if (angular.isDefined(attrs.fileType)) {\n                        childNodeAttr+=' data-file-type=\"' + attrs.fileType + '\"';\n                    }\n                    if (angular.isDefined(attrs.classExpanded)) {\n\n                        childNodeAttr+=' data-class-expanded=\"' + attrs.classExpanded + '\"';\n                    }\n                    if (angular.isDefined(attrs.classCollapsed)) {\n\n                        childNodeAttr+=' data-class-collapsed=\"' + attrs.classCollapsed + '\"';\n                    }\n                    if (angular.isDefined(attrs.classFile)) {\n\n                        childNodeAttr+=' data-class-file=\"' + attrs.classFile + '\"';\n                    }\n                    if (angular.isDefined(attrs.classParent)) {\n\n                        childNodeAttr+=' data-class-parent=\"' + attrs.classParent + '\"';\n                    }\n                    if (angular.isDefined(attrs.classLeaf)) {\n\n                        childNodeAttr+=' data-class-leaf=\"' + attrs.classLeaf + '\"';\n                    }\n\n                    var childNode = $compile('<ul><ms-tree ng-model=\"node.nodes\"' + childNodeAttr+'></ms-tree></ul>')(scope)\n\n                    elm.append(childNode);\n                }\n            }\n        };\n    });"],"sourceRoot":"/source/"}